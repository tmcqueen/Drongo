{"id":"Drongo-172","title":"Phase 2: TCP Transport","description":"Implement TCP transport: connection management, RFC 18 framing with Content-Length, keep-alive CRLF, connection pooling","status":"open","priority":3,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:04:39Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:04:39Z","labels":["phase2","transport"]}
{"id":"Drongo-1tp","title":"Phase 1: Solution Setup - Create project structure","description":"Create solution and project files: src/Drongo, src/Drongo.Core, src/Drongo.Media, tests/Drongo.Core.Tests, tests/Drongo.Media.Tests","status":"closed","priority":0,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:03:35Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:37:44Z","closed_at":"2026-02-19T15:37:44Z","close_reason":"Created solution structure with 5 projects: Drongo (host), Drongo.Core, Drongo.Media, Drongo.Core.Tests, Drongo.Media.Tests. All projects build successfully.","labels":["foundation","phase1"]}
{"id":"Drongo-2c5","title":"Phase 1: Dialog Layer (B2BUA)","description":"Implement RFC 12 Dialog state machine and B2BUA model with Call Leg (UAC) and Agent Leg (UAS). Handles INVITE, ACK, BYE, re-INVITE","status":"in_progress","priority":1,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:04:02Z","created_by":"Tim McQueen","updated_at":"2026-02-19T17:18:25Z","labels":["dialog","phase1"]}
{"id":"Drongo-3ke","title":"Phase 1: SIP Data Types \u0026 Parser","description":"Create core SIP data types (SipUri, SipRequest, SipResponse, ContactBinding, SipMethod enum) and stateless parser","status":"closed","priority":1,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:03:39Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:44:36Z","closed_at":"2026-02-19T15:44:36Z","close_reason":"Created SIP data types: SipMethod enum, SipUri, SipRequest, SipResponse, ContactBinding, and stateless SipParser with ISipParser interface. All builds successfully.","labels":["foundation","phase1"]}
{"id":"Drongo-53l","title":"Phase 3: Admin Framework","description":"Implement Admin Framework: REST API for dialogs/registrations/transports, Web UI dashboard, SignalR events, Prometheus metrics","status":"open","priority":4,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:05:10Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:05:10Z","labels":["admin","phase3"]}
{"id":"Drongo-54i","title":"Phase 1: Client Transaction State Machine","description":"Implement RFC 17.1 Client Transaction state machines: INVITE (Calling/Proceeding/Completed/Terminated) and Non-INVITE (Trying/Proceeding/Completed/Terminated)","status":"closed","priority":1,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:03:58Z","created_by":"Tim McQueen","updated_at":"2026-02-19T16:29:40Z","closed_at":"2026-02-19T16:29:40Z","close_reason":"Implemented RFC 17.1 Client Transaction state machines: INVITE (Calling/Proceeding/Completed/Terminated) and Non-INVITE (Trying/Proceeding/Completed/Terminated) with 13 unit tests all passing","labels":["phase1","transaction"]}
{"id":"Drongo-5nl","title":"fix: RegisterContext.SendResponseAsync silently drops all Contact bindings after first","description":"headers.TryAdd(\"Contact\", binding.ToString()) only inserts if the key is absent — every binding after the first is silently discarded. Multiple Contact bindings need to be comma-joined into a single header value instead. File: src/Drongo.Core/Hosting/DrongoContext.cs:60-65","status":"closed","priority":1,"issue_type":"bug","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:25Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-5pi","title":"Phase 1: In-Memory Registrar","description":"Implement RFC 10 In-Memory Registrar with ConcurrentDictionary, bindings with expiration, add/remove/refresh bindings","status":"open","priority":2,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:04:07Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:04:07Z","labels":["phase1","registrar"]}
{"id":"Drongo-6bj","title":"fix: SipUri.TryParse bare catch swallows OutOfMemoryException and all fatal exceptions","description":"The bare catch{} block in SipUri.TryParse catches all exceptions including OutOfMemoryException, StackOverflowException, and ThreadAbortException, masking fatal errors as parse failures. Should be narrowed to catch (SipParseException) or catch (Exception ex) when (ex is SipParseException or FormatException). File: src/Drongo.Core/Messages/SipUri.cs:131-139","status":"closed","priority":1,"issue_type":"bug","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:31Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-6q1","title":"fix: InMemoryRegistrar mutates List\u003cT\u003e inside ConcurrentDictionary without synchronization","description":"ConcurrentDictionary protects key insertion/removal but the List\u003cContactBinding\u003e values are mutated (RemoveAll, FindIndex, Add) inside AddOrUpdate callbacks while other threads can simultaneously read _bindings[aorKey]. The inner list needs its own lock, or replace with immutable copy-on-write (ImmutableList/ToImmutableList) with atomic ConcurrentDictionary.TryUpdate. File: src/Drongo.Core/Registration/InMemoryRegistrar.cs:40-66","status":"closed","priority":1,"issue_type":"bug","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:31Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-7pc","title":"Phase 3: WebRTC Integration","description":"Implement WebRTC gateway: SIP over WebSocket (RFC 7118), SDP translation, DTLS-SRTP, ICE handling","status":"open","priority":4,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:05:07Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:05:07Z","labels":["phase3","webrtc"]}
{"id":"Drongo-80g","title":"Phase 2: Media Bridging","description":"Implement two-leg media bridging: conference calls, direct media path between endpoints, proper session lifecycle","status":"open","priority":3,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:04:59Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:04:59Z","labels":["media","phase2"]}
{"id":"Drongo-9dq","title":"Phase 1: Timer Infrastructure","description":"Create abstract timer interface (ITimerFactory), RFC Appendix A timers (T1=500ms, T2=4s, T4=5s), and transaction timers","status":"closed","priority":1,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:03:44Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:45:30Z","closed_at":"2026-02-19T15:45:30Z","close_reason":"Created timer infrastructure: ITimer interface, SipTimerFactory with RFC Appendix A defaults (T1=500ms, T2=4s, T4=5s), and all transaction timers (A-K)","labels":["foundation","phase1"]}
{"id":"Drongo-9id","title":"Phase 3: Call Flow Scripting Framework Design","description":"Design and document the call flow scripting framework: IVR builder API, state machine scripting, conditional logic, integration with dialog layer","status":"open","priority":4,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:10:28Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:10:28Z","labels":["chore","phase3"]}
{"id":"Drongo-ao0","title":"fix: DrongoApplication.Services throws InvalidOperationException at runtime","description":"IServiceCollection is never registered as a service in DrongoBuilder.Build(), so _serviceProvider.GetRequiredService\u003cIServiceCollection\u003e() will throw InvalidOperationException at runtime for any caller of the Services property. File: src/Drongo.Core/Hosting/DrongoApplication.cs:23","status":"closed","priority":1,"issue_type":"bug","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:31Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-bc3","title":"Phase 1: UDP Transport Layer","description":"Implement UDP transport: socket receive loops, SocketAsyncEventArgs pooling, message dispatch to parser","status":"closed","priority":1,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:03:48Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:47:21Z","closed_at":"2026-02-19T15:47:21Z","close_reason":"Created UDP transport foundation: IUdpTransport interface, UdpTransport implementation with receive loops using SocketAsyncEventArgs, message dispatch to parser via Channel","labels":["phase1","transport"]}
{"id":"Drongo-bfz","title":"Phase 2: UPDATE \u0026 REFER Support","description":"Implement RFC 3311 UPDATE (mid-dialog offer/answer) and RFC 3515 REFER (call transfer with NOTIFY)","status":"open","priority":3,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:04:48Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:04:48Z","labels":["phase2","signaling"]}
{"id":"Drongo-bkr","title":"Phase 2: Redis-Backed Registrar","description":"Implement distributed registrar with Redis backend: atomic operations, expiration handling, failover support","status":"open","priority":3,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:04:56Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:04:56Z","labels":["phase2","registrar"]}
{"id":"Drongo-cpb","title":"perf: SipUri.ToString() uses repeated string concatenation in hot path","description":"SipUri.ToString() performs multiple string concatenations (result += ...) and is called on every AOR key generation, registration lookup, and log line. Use StringBuilder or string.Create with a SpanAction to eliminate intermediate string allocations. This is particularly relevant given the Phase 2 target of 100k+ registrations. File: src/Drongo.Core/Messages/SipUri.cs:93-111","status":"closed","priority":1,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:31Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-eda","title":"Phase 1: Hosting \u0026 Middleware","description":"Implement DrongoApplication with IDrongoBuilder, MapInvite, MapRegister. Create contexts: DrongoContext, InviteContext, RegisterContext. Middleware pipeline","status":"open","priority":2,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:04:18Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:04:18Z","labels":["hosting","phase1"]}
{"id":"Drongo-hmh","title":"Phase 2: Parallel Forking","description":"Implement parallel forking: fork to multiple targets, collect responses, accept first 2xx, cancel others","status":"open","priority":3,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:04:52Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:04:52Z","labels":["phase2","signaling"]}
{"id":"Drongo-i1e","title":"fix: direct timer dictionary access throws KeyNotFoundException","description":"_timers[\"E\"] in NonInviteClientTransaction.cs:142 and _timers[\"G\"] in InviteServerTransaction.cs:149 will throw KeyNotFoundException if the timer was concurrently stopped and removed between the state guard and the dictionary access. Replace with the safe pattern already used elsewhere: GetTimer(SipTimerNames.TimerX) with null-conditional.","status":"closed","priority":1,"issue_type":"bug","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:25Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-i1s","title":"refactor: simplify over-engineered SipParseResult hierarchy","description":"SipParseResult has two private inner classes (SuccessResult, FailureResult) that differ only by constructor arguments. Per project C# patterns, this should use records for immutable result types. Replace the abstract class + inner classes pattern with a sealed record-based approach or simple sealed class with static factory methods, eliminating unnecessary inheritance. File: src/Drongo.Core/Parsing/SipParser.cs:12-83","status":"closed","priority":1,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:31Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-ihf","title":"Phase 3: TLS Transport","description":"Implement SIP over TLS: TLS listener, certificate configuration via DI, SNI support, optional mutual TLS","status":"open","priority":4,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:05:03Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:05:03Z","labels":["phase3","transport"]}
{"id":"Drongo-j1f","title":"Phase 1: Media Session (NAudio)","description":"Implement IMediaSession with NAudio: PlayAsync, RecordAsync, ReceiveDtmfAsync, StartAsync, StopAsync. Minimal RTP handling, G.711, DTMF RFC 2833","status":"open","priority":2,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:04:12Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:04:12Z","labels":["media","phase1"]}
{"id":"Drongo-kdi","title":"perf: Dialog.ExtractTag allocates a new Regex instance on every call","description":"Regex.Match(headerValue, \";tag=(\\\\S+)\") compiles a new Regex object on every invocation. This is called on every in-dialog request and response. Use [GeneratedRegex] source-generated attribute (preferred in .NET 10) or a static readonly compiled Regex field to eliminate per-call allocation and compilation. File: src/Drongo.Core/Dialogs/Dialog.cs:129","status":"closed","priority":1,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:31Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-n2b","title":"fix: SipRequest and SipResponse must be record types per AGENTS.md","description":"AGENTS.md explicitly states 'Use record for immutable DTOs (SipRequest, ContactBinding)'. Both SipRequest and SipResponse use only init properties with no mutable state after construction — they are the precise target use case for record. ContactBinding already correctly uses record. Files: src/Drongo.Core/Messages/SipRequest.cs:5, src/Drongo.Core/Messages/SipResponse.cs:5","status":"closed","priority":1,"issue_type":"bug","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:31Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-nwf","title":"fix: DrongoApplication.RunAsync invokes onStopping before app is started","description":"The lifecycle order in RunAsync is inverted: onStopping fires immediately after NotifyStartingAsync, before NotifyStartedAsync and onStarted are ever called. Correct order should be: NotifyStarting -\u003e start app -\u003e NotifyStarted + onStarted -\u003e [wait for stop] -\u003e NotifyStoppingAsync + onStopping. File: src/Drongo.Core/Hosting/DrongoApplication.cs:46-67","status":"closed","priority":1,"issue_type":"bug","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:26Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-tkt","title":"Phase 1: Server Transaction State Machine","description":"Implement RFC 17.2 Server Transaction state machines: INVITE (Proceeding/Completed/Confirmed/Terminated) and Non-INVITE (Trying/Proceeding/Completed/Terminated)","status":"closed","priority":1,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:03:53Z","created_by":"Tim McQueen","updated_at":"2026-02-19T16:25:34Z","closed_at":"2026-02-19T16:25:34Z","close_reason":"Implemented RFC 17.2 Server Transaction state machines: INVITE (Proceeding/Completed/Confirmed/Terminated) and Non-INVITE (Trying/Proceeding/Completed/Terminated) with 17 unit tests all passing","labels":["phase1","transaction"]}
{"id":"Drongo-umu","title":"fix: shared receive buffer race condition in UdpTransport","description":"All SocketAsyncEventArgs in UdpTransport share the same _buffer array. When Environment.ProcessorCount \u003e 1, receiveCount \u003e 1 and concurrent receives fire simultaneously — each writing into the same byte array, corrupting each other's data. Each SocketAsyncEventArgs needs its own dedicated buffer (new byte[_receiveBufferSize]). File: src/Drongo.Core/Transport/UdpTransport.cs:66-82","status":"closed","priority":1,"issue_type":"bug","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-21T11:49:25Z","created_by":"Tim McQueen","updated_at":"2026-02-22T18:35:34Z","closed_at":"2026-02-22T18:35:34Z","close_reason":"Closed"}
{"id":"Drongo-zs8","title":"Phase 2: PRACK Support (Reliable 1xx)","description":"Implement RFC 3262 PRACK: reliable provisional responses, RAck/RSeq headers, 100rel option tag","status":"open","priority":3,"issue_type":"task","owner":"tim.mcqueen@gmail.com","created_at":"2026-02-19T15:04:44Z","created_by":"Tim McQueen","updated_at":"2026-02-19T15:04:44Z","labels":["phase2","signaling"]}
